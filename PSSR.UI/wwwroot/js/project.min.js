var project=project||function(){function u(n){i=n}function f(i){t=i;n&&(n.clear().draw(),n.destroy());$("form[name='projectForm']").validate({rules:{pDescription:"required",type:"required",contractorId:"required"},messages:{pDescription:"Please enter  Name",type:"Please select a Type",contractorId:"Please select a Contractor"},errorElement:"em",errorPlacement:function(n,t){n.addClass("invalid-feedback");t.prop("type")==="checkbox"?n.insertAfter(t.next("label")):n.insertAfter(t)},highlight:function(n){$(n).addClass("is-invalid").removeClass("is-valid")},unhighlight:function(n){$(n).addClass("is-valid").removeClass("is-invalid")},submitHandler:function(){var n=$("input#pDescription").val(),t=$("select#type").val(),i=$("select#contractorId").val(),r=$("#contractorId option:selected").text(),u=$("input#startDate").val(),f=$("input#endDate").val();s(n,t,i,u,f,r)}});$("form[name='projectEditForm']").validate({rules:{pDescription:"required",type:"required",contractorId:"required"},messages:{pDescription:"Please enter Name",type:"Please select a Type",contractorId:"Please select a Contractor"},errorElement:"em",errorPlacement:function(n,t){n.addClass("invalid-feedback");t.prop("type")==="checkbox"?n.insertAfter(t.next("label")):n.insertAfter(t)},highlight:function(n){$(n).addClass("is-invalid").removeClass("is-valid")},unhighlight:function(n){$(n).addClass("is-valid").removeClass("is-invalid")},submitHandler:function(){var n=$("input#editPDescription").val(),t=$("select#edittype").val(),i=$("select#editcontractorId").val(),r=$("#contractorId option:selected").text(),u=$("input#editstartDate").val(),f=$("input#editendDate").val(),e=$("#current-projectId").val();h(n,t,i,u,f,e,r)}})}function r(){return $.ajax({type:"Get",url:"/APSE/Project/GetProjects",contentType:"application/json; charset=utf-8",dataType:"json",success:function(){},error:function(n){console.log(n)}})}async function e(){var i=$("#project-content"),u;i.empty();u=await r();$.each(u,function(n,r){var f=$("<td>"+r.name+"<\/td>"),e=$("<td>"+r.contractorName+"<\/td>"),o=$("<td>"+t.getProjectType(r.type)+"<\/td>"),s=$("<td><button  data-toggle='modal' data-target='#edit-projectModal' data-id='"+r.id+"' class='edit-project btn btn-indigo btn-icon' style='height:28px;min-height:28px'><i style='line-height:0.4;color: #FFF;' class='typcn typcn-edit'><\/i><\/button><\/td>"),h=$("<td><button data-id='"+r.id+"' class='delete-project btn  btn-danger btn-icon' style='height:28px;min-height:28px'><i style='line-height:0.4;color: #FFF;' class='typcn typcn-delete'><\/i><\/button><\/td>"),u=$("<tr><\/tr>");u.append(f).append(e).append(o).append(s).append(h);i.append(u)});n=l()}function o(n){return $.ajax({type:"Get",url:"/APSE/Project/GetProject/"+n,contentType:"application/json; charset=utf-8",dataType:"json",success:function(){},error:function(n){console.log(n)}})}function s(i,r,u,f,e,o){var s={description:i,startDate:f,endDate:e,contractorId:u,type:r},h=t.getProjectType(parseInt(r));$.ajax({type:"Post",url:"/APSE/Project/CreateProject",data:JSON.stringify(s),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){t.key==200?n&&n.row.add([i,o,h,"<button  data-toggle='modal' data-target='#edit-projectModal' data-id='"+t.subject+"' class='edit-project btn btn-indigo btn-icon' style='height:28px;min-height:28px'><i style='line-height:0.4;color: #FFF;' class='typcn typcn-edit'><\/i><\/button><\/td>","<button  data-toggle='modal' data-id='"+t.subject+"' class='delete-project btn  btn-danger btn-icon' style='height:28px;min-height:28px'><i style='line-height:0.4;color: #FFF;' class='typcn typcn-delete'><\/i><\/button>"]).draw(!1):alert(t.value)},error:function(n){console.log(n)}})}function h(r,u,f,e,o,s,h){var c={description:r,startDate:e,endDate:o,contractorId:f,type:u},l=t.getProjectType(parseInt(u));$.ajax({type:"PUT",url:"/APSE/Project/UpdateProject/"+s,data:JSON.stringify(c),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){t.key==200?n&&(n.row(":eq("+i+")").data([r,h,l,"<button  data-toggle='modal' data-target='#edit-projectModal' data-id='"+t.subject+"' class='edit-project btn btn-indigo btn-icon' style='height:28px;min-height:28px'><i style='line-height:0.4;color: #FFF;' class='typcn typcn-edit'><\/i><\/button><\/td>","<button  data-toggle='modal' data-id='"+t.subject+"' class='delete-project btn  btn-danger btn-icon' style='height:28px;min-height:28px'><i style='line-height:0.4;color: #FFF;' class='typcn typcn-delete'><\/i><\/button>"]),$("#edit-projectModal").modal("toggle")):alert(t.value)},error:function(n){console.log(n)}})}function c(t){$.ajax({type:"Delete",url:"/APSE/Project/DeleteProject/"+t,contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){t.key==200?n&&n.row(":eq("+i+")").remove().draw(!1):alert(t.value)},error:function(n){console.log(n)}})}function l(){var n=window.innerHeight*.45;return $("#projectLst").DataTable({responsive:!0,FixedHeader:!0,scrollY:n+"px",dom:"Bfrtip",buttons:[{text:"",extend:"excelHtml5",className:"btn btn-success btn-sm",exportOptions:{modifier:{page:"all"}},init:function(n,t){$(t).removeClass("dt-button");$(t).append('<p class="" style="height:1px;"><i style="font-size:20px;color:#FFF;" class="fa fa-file-excel"><\/i><p>')},extension:".xlsx",filename:"Projects",messageTop:"Projects",customize:function(n){var t=n.xl.worksheets["sheet1.xml"];$("row",t).each(function(n){n>2&&(n%2==0?$("row:nth-child("+(n+1)+") c",t).attr("s","10"):$("row:nth-child("+(n+1)+") c",t).attr("s","20"))})}},{extend:"print",text:"",className:"btn btn-warning btn-sm",exportOptions:{modifier:{page:"all"}},init:function(n,t){$(t).removeClass("dt-button");$(t).append('<p class="" style="height:1px;"><i style="font-size:20px;color:#FFF;" class="fa fa-print"><\/i><p>')}}],scrollCollapse:!0,scroller:!0,fnInitComplete:function(){},fnDrawCallback:function(){$(".dataTables_scrollBody").each(function(){if(!$(this).hasClass("ps"))const n=new PerfectScrollbar($(this)[0]);$(this)[0].scrollTop=0})}})}return{init:function(n){f(n)},getProjectList:function(){return e()},getProject:function(n){return o(n)},setCurrentIndex:function(n){u(n)},removeProject:function(n){c(n)},getAllProjects:function(){return r()}};var t,n,i}();