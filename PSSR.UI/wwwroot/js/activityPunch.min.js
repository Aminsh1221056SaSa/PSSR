var activityPunch=activityPunch||function(){function r(){$.ajax({type:"Get",url:"/poec/PunchType/GetAllPunchTypes",contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){$.each(n,function(n,t){$("#punch-type-dropdown").append("<option value="+t.id+">"+t.name+"<\/option>")})},error:function(n){console.log(n)}})}function u(){$.ajax({type:"Get",url:"/poec/PunchCategory/GetPunchCategoryes",contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){$.each(n,function(n,t){$("#punch-category-dropdown").append("<option value="+t.id+">"+t.name+"<\/option>")})},error:function(n){console.log(n)}})}function n(n){$.ajax({type:"Get",url:"/poec/activityPunch/GetActivityPunchs?activityId="+n,contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){y();$.each(n,function(n,t){c(t,n)});p()},error:function(n){console.log(n)}})}function i(n){$.ajax({type:"Get",url:"/poec/activityPunch/GetPunchGoDetails?punchId="+n,contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){v(n)},error:function(n){console.log(n)}})}function t(n){$.ajax({type:"Get",url:"/poec/activityPunch/GetPunchDetails?punchId="+n,contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){a(n)},error:function(n){console.log(n)}})}function f(n){$.ajax({type:"Get",url:"/poec/ActivityPunch/GetPunchDocuments?punchId="+n,contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){w();$.each(n,function(n,t){l(t,n)});b()},error:function(n){console.log(n)}})}function e(t,i,r){$("#modal-default-overlay").modal("show");$.ajax({type:"Delete",url:"/poec/activityPunch/DeletePunch/"+t+"",contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){$("#modal-default-overlay").modal("toggle");t.key==200?(n(i),r.getActivityDetails(i)):($("#global-error-message").html(t.value),$("#modal-danger").modal("show"))},error:function(n){console.log(n)}})}function o(t,i){var r=$("#punch-type-dropdown").val(),u=$("#punch-category-dropdown").val(),f=$("#pCode").val(),e=$("#pOrginated").val(),o=$("#pCreatedBy").val(),s=$("#pCheckBy").val(),h=$("#pApproveBy").val(),c=$("#pEstimateMh").val(),l=$("#pActualMh").val(),a=$("#pClearPlan").val(),v=$("#pOrginatedDate").val(),y=$("#pCheckDate").val(),p=$("#pClearDate").val(),w=$("#pVendorName").val(),b=$("#pDefect").val(),k=$("#pVendor").iCheck("update")[0].checked,d=$("#pMaterial").iCheck("update")[0].checked,g=$("#pEnginerig").iCheck("update")[0].checked,nt={Code:f,OrginatedBy:e,CreatedBy:o,CheckBy:s,ApproveBy:h,EstimateMh:c,ActualMh:l,ClearPlan:a,OrginatedDate:v,CheckDate:y,ClearDate:p,VendorName:w,DefectDescription:b,activityId:t,PunchTypeId:r,VendorRequired:k,MaterialRequired:d,EnginerigRequired:g,CategoryId:u};$("#modal-default-Addpunch").modal("toggle");$("#modal-default-overlay").modal("show");$.ajax({type:"POST",url:"/poec/activityPunch/AddPUnchToActivity",contentType:"application/json; charset=utf-8",data:JSON.stringify(nt),dataType:"json",success:function(r){$("#modal-default-overlay").modal("toggle");r.key==200?(n(t),i.getActivityDetails(t)):($("#global-error-message").html(r.value),$("#modal-danger").modal("show"))},error:function(n){console.log(n)}})}function s(i,r){var u=$("#pCode").val(),f=$("#pOrginated").val(),e=$("#pCreatedBy").val(),o=$("#pCheckBy").val(),s=$("#pApproveBy").val(),h=$("#pEstimateMh").val(),c=$("#pActualMh").val(),l=$("#pClearPlan").val(),a=$("#pOrginatedDate").val(),v=$("#pCheckDate").val(),y=$("#pClearDate").val(),p=$("#pVendorName").val(),w=$("#pDefect").val(),b=$("#pVendor").iCheck("update")[0].checked,k=$("#pMaterial").iCheck("update")[0].checked,d=$("#pEnginerig").iCheck("update")[0].checked,g={Id:i,Code:u,OrginatedBy:f,CreatedBy:e,CheckBy:o,ApproveBy:s,EstimateMh:h,ActualMh:c,ClearPlan:l,OrginatedDate:a,CheckDate:v,ClearDate:y,VendorName:p,DefectDescription:w,VendorRequired:b,MaterialRequired:k,EnginerigRequired:d};$("#modal-default-Addpunch").modal("toggle");$("#modal-default-overlay").modal("show");$.ajax({type:"PUT",url:"/poec/activityPunch/UpdatePUnchToActivity",contentType:"application/json; charset=utf-8",data:JSON.stringify(g),dataType:"json",success:function(u){$("#modal-default-overlay").modal("toggle");u.key==200?r<=0?t(i):n(r):($("#global-error-message").html(u.value),$("#modal-danger").modal("show"))},error:function(n){console.log(n)}})}function h(r,u,f){var e=$("#paprovBy").val(),o=$("#pCheckBy").val(),s=$("#pClearBy").val(),h=$("#pCheckDate").val(),c=$("#pClearDate").val(),l={Id:r,ApproveBy:e,CheckBy:o,ClearBy:s,CheckDate:h,ClearDate:c};$("#modal-default-punchModify").modal("toggle");$("#modal-default-overlay").modal("show");$.ajax({type:"PUT",url:"/poec/activityPunch/UpdatePUnchGo",contentType:"application/json; charset=utf-8",data:JSON.stringify(l),dataType:"json",success:function(e){$("#modal-default-overlay").modal("toggle");e.key==200?f==null?(t(r),i(r)):(n(u),f.getActivityDetails(u)):($("#global-error-message").html(e.value),$("#modal-danger").modal("show"))},error:function(n){console.log(n)}})}function c(n){var t=$("<tr id='tr-"+n.id+"'><\/tr>"),i,r,u;t.append("<td>"+n.code+"<\/td>");t.append("<td>"+n.type+"<\/td>");t.append("<td>"+n.orginatedBy+"<\/td>");t.append("<td>"+n.orginatedDate+"<\/td>");i=$("<td><\/td>");r=$("<td><\/td>");i.append("<p class='btn btn-info edtit-punch-btn btn-sm' id='ed-sm-"+n.id+"'><i class='fa fa-edit'><\/i><\/p>");n.isEditable?$("#punch-edit-btns-pane").hide():r.append("<p class='btn btn-danger delete-punch-btn btn-sm' id='dl-sm-"+n.id+"'><i class='fa fa-remove'><\/i><\/p>");u=n.isApprove?$("<td><p class='btn btn-success go-punch-btn btn-sm' id='go-sm-"+n.id+"'><i class='fa fa-check'><\/i><\/p><\/td>"):$("<td><p class='btn btn-warning go-punch-btn btn-sm' id='go-sm-"+n.id+"'><i class='fa fa-arrow-right'><\/i><\/p><\/td>");t.append(i);t.append(r);t.append(u);$("#punch-activity").append(t)}function l(n,t){t=t+1;var i=$("<tr id='tr-"+n.id+"'><\/tr>");i.append("<td>"+t+"<\/td>");i.append("<td>"+n.createdDate+"<\/td>");i.append("<td>"+n.description+"<\/td>");i.append("<td><p class='btn btn-info btn-sm activity-doc-class' data-docId='"+n.id+"'><i class='fa fa-file'><\/i><\/p><\/td>");$("#document-punch").append(i)}function a(n){$("#pu-st-id").val(n.id);$("#ac-st-id").val(n.activityId);$("#punch-type-dropdown").val(n.punchTypeId);$("#pCode").val(n.code);$("#pOrginated").val(n.orginatedBy);$("#pCreatedBy").val(n.createdBy);$("#pCheckBy").val(n.checkBy);$("#pApproveBy").val(n.approveBy);$("#pEstimateMh").val(n.estimateMh);$("#pActualMh").val(n.actualMh);$("#pClearPlan").val(n.clearPlan);$("#pOrginatedDate").val(n.orginatedDate);$("#pCheckDate").val(n.checkDate);$("#pClearDate").val(n.clearDate);$("#pVendorName").val(n.vendorName);$("#pDefect").val(n.defectDescription);$("#punch-type-dropdown").attr("disabled",!0);$("#save-punch").css("display","none");$("#edit-punch").css("display","block");$("#edit-punch").attr("data-editid",n.id);$("#pVendor").iCheck("uncheck");$("#pMaterial").iCheck("uncheck");$("#pEnginerig").iCheck("uncheck");n.vendorRequired==!0&&$("#pVendor").iCheck("check");n.materialRequired==!0&&$("#pMaterial").iCheck("check");n.enginerigRequired==!0&&$("#pEnginerig").iCheck("check");var t="progress-bar-red";n.progress<=25?t="progress-bar-red":n.progress>25&&n.progress<=65?t="progress-bar-yellow":n.progress>65&&n.progress<=95?t="progress-bar-aqua":n.progress>95&&(t="progress-bar-green");$("#ac-st-prPr").removeClass();$("#selected-punch-c").html("Punch Code : "+n.code);$("#ac-st-prPr").addClass("progress-bar").addClass(t).css("width",n.progress+"%");$("#ac-st-prtx").html(n.progress+" %");$("#cr-st-co").html(k(n.condition));$("#cr-co-ac").html(n.activityCode);n.isEditable?($("#editable-punch").hide(),$("#editable-go-punch").hide()):($("#editable-punch").show(),$("#editable-go-punch").show())}function v(n){$("#pClearBy").val(n.createdBy);$("#pClearDate").val(n.clearDate);$("#paprovBy").val(n.approveBy);$("#pCheckBy").val(n.checkBy);$("#pCheckDate").val(n.checkDate);n.isApprove==!0&&n.isClear==!0?($("#pClearBy").attr("disabled",!0),$("#pClearDate").attr("disabled",!0),$("#paprovBy").attr("disabled",!0),$("#pCheckBy").attr("disabled",!0),$("#pCheckDate").attr("disabled",!0)):n.isApprove==!1&&n.isClear==!0?($("#pClearBy").attr("disabled",!0),$("#pClearDate").attr("disabled",!0),$("#paprovBy").attr("disabled",!1),$("#pCheckBy").attr("disabled",!1),$("#pCheckDate").attr("disabled",!1)):n.isApprove==!1&&n.isClear==!1&&($("#pClearBy").attr("disabled",!1),$("#pClearDate").attr("disabled",!1),$("#paprovBy").attr("disabled",!0),$("#pCheckBy").attr("disabled",!0),$("#pCheckDate").attr("disabled",!0));$("#save-go-punch").attr("data-gopunch-id",n.id);$("#modal-default-punchModify").modal("show")}function y(){var n=$("#activitypunchTable").DataTable();n.clear().draw();n.destroy()}function p(){var n=$("#activitypunchTable").DataTable({columnDefs:[{orderable:!1,targets:[4,5,6]}]})}function w(){var n=$("#punchDocTable").DataTable();n.clear().draw();n.destroy()}function b(){var n=$("#punchDocTable").DataTable()}function k(n){var t="";switch(n){case 3e3:t="Normal";break;case 3002:t="Hold";break;case 3003:t="Front"}return t}return{init:function(){},getallPunches:function(){r()},getallPunchCategory:function(){u()},getActivityPunchs:function(t){n(t)},savePunch:function(n,t){o(n,t)},deletePunch:function(n,t,i){e(n,t,i)},getpunchDetails:function(n){t(n)},editPunch:function(n,t){s(n,t)},showGoPunchModal:function(n){i(n)},editPUnchGo:function(n,t,i){h(n,t,i)},getPunchDocuments:function(n){f(n)}}}();