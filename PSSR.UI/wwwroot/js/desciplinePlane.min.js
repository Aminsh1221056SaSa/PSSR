var desciplinePlane=desciplinePlane||function(){function r(){var n=$("#workPackage-type");n.empty();$.ajax({type:"Get",url:"/poec/WorkPackage/GetRoadMaps",contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){$.each(t,function(t,i){n.append("<option value="+i.id+">"+i.title+"<\/option>")})},error:function(n){console.log(n)}})}function u(){var n=$("#location-type");n.empty();$.ajax({type:"Get",url:"/poec/WorkPackage/GetLocations",contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){$.each(t,function(t,i){n.append("<option value="+i.id+">"+i.title+"<\/option>")})},error:function(n){console.log(n)}})}function f(){var n=$("#system-type");n.empty();n.append("<option value=0>...Select system...<\/option>");$.ajax({type:"Get",url:"/poec/ProjectSystem/GetProjectSystems",contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){$.each(t,function(t,i){n.append("<option value="+i.id+">"+i.title+"<\/option>")})},error:function(n){console.log(n)}})}function n(n){var t=$("#subSystem-type");t.empty();t.append("<option value=0>...Select SubSystem...<\/option>");$.ajax({type:"Get",url:"/poec/SubSystem/GetSubSystemBySystem?systemId="+n+"",contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){$.each(n,function(n,i){t.append("<option value="+i.id+">"+i.code+"<\/option>")})},error:function(n){console.log(n)}})}function t(n,t,i,r){$.ajax({type:"Get",url:"/poec/Project/GetDesciplineActivityGroupList?workPackageId="+r+"&locationId="+i+"&systemId="+t+"&subsystemId="+n,contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){h();$.each(n,function(n,t){o(t,n)});c()},error:function(n){console.log(n)}})}function i(n,t,i,r){$.ajax({type:"Get",url:"/poec/Project/GetFormDictionaryGroupedByPlanDate?workId="+n+"&locationId="+t+"&subSystemId="+i+"&desId="+r,contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){l();$.each(n,function(n,t){s(t,n)});a()},error:function(n){console.log(n)}})}function e(n,r,u,f,e,o){var s={StartDate:e,EndDate:o,DesciplineId:f,WorkPackageId:n,SubSystemId:u,LocationId:r};$("#modal-default-overlay").modal("show");$.ajax({type:"PUT",url:"/poec/Activity/UpdateActivityPlane",data:JSON.stringify(s),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){$("#modal-default-overlay").modal("toggle");e.key==200?(t(u,0,r,n),i(n,r,u,f)):($("#global-error-message").html(e.value),$("#modal-danger").modal("show"))},error:function(n){console.log(n)}})}function o(n){var i=n.title,t=$("<tr id='tr-"+n.id+"' ><\/tr>"),r,u;t.append("<td>"+i+"<\/td>");r=$("<td>"+n.total+"<\/td>");u=$("<td>"+n.done+"<\/td>");t.append(r);t.append(u);t.append("<td>"+n.startDate+"<\/td>");t.append("<td>"+n.endDate+"<\/td>");t.append("<td><p class='btn btn-warning plan-edit-class'  data-name='"+i+"'  id='des-it-"+n.id+"'>Plan<\/p><\/td>");$("#model-items").append(t)}function s(n){var f=n.title,t=$("<tr id='tr-"+n.id+"' ><\/tr>"),i=$("<td>"+n.title+"<\/td>"),r=$("<td>"+n.total+"<\/td>"),u=$("<td>"+n.done+"<\/td>");t.append(i);t.append(r);t.append(u);t.append("<td>"+n.startDate+"<\/td>");t.append("<td>"+n.startTime+"<\/td>");t.append("<td>"+n.endDate+"<\/td>");t.append("<td>"+n.endTime+"<\/td>");t.append("<td><p title='Activities' class='btn btn-success descipline-plan-class'  id='plan-des-"+n.id+"'><i  class='fa fa-reorder'><\/i><\/p><\/td>");$("#model-items1").append(t)}function h(){var n=$("#wbsCreatorTable").DataTable();n.clear().draw();n.destroy()}function c(){var n=$("#wbsCreatorTable").DataTable()}function l(){var n=$("#activityGroupPlane").DataTable();n.clear().draw();n.destroy()}function a(){var n=window.innerHeight*.44,t=$("#activityGroupPlane").DataTable({scrollY:n+"px",fixedHeader:!0,dom:'<"row"<"col-sm-12 col-md-1"B><"col-sm-12 col-md-7"l><"col-sm-12 col-md-3  text-left"i>><"row"<"col-sm-12"tr>><"row"<"col-sm-12 col-md-12"p>>',columnDefs:[{orderable:!0,targets:[3,5]},{sType:"date",targets:[3,5]},],buttons:[{text:"",extend:"excelHtml5",collectionLayout:"fixed two-column ",className:"btn btn-success btn-sm",exportOptions:{modifier:{page:"current"}},init:function(n,t){$(t).removeClass("dt-button");$(t).append('<p class="" style="height:8px"><i style="font-size:16px;color:#FFF;" class="fa fa-file-excel-o"><\/i><p>')},extension:".xlsx",filename:"PlanConfiguration",messageTop:"Plan",customize:function(n){var t=n.xl.worksheets["sheet1.xml"];$("row",t).each(function(n){n>2&&(n%2==0?$("row:nth-child("+(n+1)+") c",t).attr("s","10"):$("row:nth-child("+(n+1)+") c",t).attr("s","20"))})}}]})}return{init:function(){r();u();f();n(0)},getDesciplineGroup:function(n,i,r,u){t(n,i,r,u)},getActivityGroupedByPlanDate:function(n,t,r,u){i(n,t,r,u)},SetDesciplinePlane:function(n,t,i,r,u,f){e(n,t,i,r,u,f)},getProjectSubSystems:function(t){n(t)}}}();